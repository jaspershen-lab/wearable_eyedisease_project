========================================
时间窗口2类聚类分析 + 可视化报告
========================================

🎯 关键特点 - 强制2类聚类:
✅ 所有时间窗口都固定聚成2类
✅ 聚类标签统一为1和2
✅ 颜色方案统一：红色(Cluster1) vs 蓝色(Cluster2)
✅ m值限制在1.5-3.0范围内
✅ 自动K-means备用方案

🎨 可视化功能:
✅ 每个时间窗口的详细2类聚类趋势图
✅ 个体轨迹 + 平均轮廓可视化
✅ 跨时间窗口2类聚类中心对比
✅ 时间窗口聚类质量总览
✅ 聚类中心趋势图（干净风格）
✅ 带误差棒的统计图表
✅ 固定随机种子确保可重复性

🔬 分析设置:
- 随机种子: 123 (确保可重复性)
- 聚类方法: Fuzzy C-means (Mfuzz) + K-means备用
- 聚类数量: 2 (所有时间窗口强制统一)
- m值范围: 1.5 - 3.0
- 分析指标: cv_rhr_1, steps_max
- 时间窗口数: 5
- 分析日期: 2025-07-30

📊 各时间窗口2类聚类结果:

1. BASELINE:
   - 患者数量: 14
   - 聚类数量: 2 (固定为2类)
   - 平均Max Membership: 1.000 ± 0.000
   - 聚类方法: mfuzz
   - m值: 3.000
   - 标签重新映射: 是

2. ACUTE_RECOVERY:
   - 患者数量: 15
   - 聚类数量: 2 (固定为2类)
   - 平均Max Membership: 1.000 ± 0.000
   - 聚类方法: mfuzz
   - m值: 3.000
   - 标签重新映射: 是

3. EARLY_RECOVERY:
   - 患者数量: 15
   - 聚类数量: 2 (固定为2类)
   - 平均Max Membership: 1.000 ± 0.000
   - 聚类方法: mfuzz
   - m值: 3.000
   - 标签重新映射: 是

4. MID_RECOVERY:
   - 患者数量: 14
   - 聚类数量: 2 (固定为2类)
   - 平均Max Membership: 1.000 ± 0.000
   - 聚类方法: mfuzz
   - m值: 3.000
   - 标签重新映射: 是

5. LATE_RECOVERY:
   - 患者数量: 15
   - 聚类数量: 2 (固定为2类)
   - 平均Max Membership: 1.000 ± 0.000
   - 聚类方法: mfuzz
   - m值: 3.000
   - 标签重新映射: 是

🎨 生成的可视化文件结构:
📁 plots/time_window_trends/[window_name]/:
  - 每个2类聚类的详细趋势图
  - 个体轨迹 + 拟合趋势线
  - 2类聚类对比图
  - 所有指标组合图

📁 plots/cluster_center_trends/[window_name]/:
  - 2类聚类中心趋势图（干净风格）
  - 带误差棒的聚类中心图

📁 plots/cross_window_analysis/:
  - 跨时间窗口2类聚类中心对比
  - 时间窗口聚类质量总览

📈 可视化特点（针对2类优化）:
✅ 统一颜色方案：红色(Cluster1) vs 蓝色(Cluster2)
✅ 个体患者轨迹：每条线代表一个患者
✅ 平均轮廓：显示聚类平均趋势
✅ 拟合趋势线：平滑的loess拟合
✅ 标准误差：误差棒显示不确定性
✅ 2类对比：直观比较两个聚类模式

🔍 如何使用2类可视化结果:
1. 查看 time_window_trends/ 了解每个时间窗口的2类聚类模式
2. 比较2类聚类的平均轮廓识别关键差异
3. 查看 cluster_center_trends/ 获得干净的聚类中心图
4. 查看 cross_window_analysis/ 了解跨窗口聚类演变
5. 使用统一颜色方案进行跨窗口比较

📊 2类聚类质量总结:
- 平均Max Membership: 1.000
- 总分析患者数: 73
- 需要标签修正的窗口: 5/5
- 使用Mfuzz的窗口: 5/5
- 使用K-means的窗口: 0/5
- 所有聚类标签已统一为1和2
- 颜色方案：红色(Cluster1) vs 蓝色(Cluster2)

🎯 关键发现:
✅ 固定随机种子确保完全可重复性
✅ 所有时间窗口都成功聚成2类
✅ m值限制解决了聚类模糊问题
✅ 统一的颜色方案便于跨窗口比较
✅ 可视化清晰展示了2类聚类模式差异
✅ K-means备用方案提供了可靠保障

📝 数据文件:
- time_window_2cluster_membership_data.csv: 2类聚类宽格式数据
- time_window_2cluster_summary.csv: 2类聚类摘要
- [window]_detailed_2cluster_membership.csv: 各窗口详细数据
- [window]_2cluster_quality.csv: 各窗口质量数据
- [window]_2cluster_membership_matrix.csv: 各窗口membership矩阵

🚀 下一步建议:
1. 使用2类可视化结果进行临床解读
2. 基于2类聚类模式进行预后分析
3. 比较不同时间窗口的2类预测能力
4. 验证2类聚类模式的临床意义
5. 使用统一颜色方案制作报告
6. 分析聚类演变的时间模式

报告生成时间: 2025-07-30 10:27:20.149468
========================================

